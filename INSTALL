Como instalar este sistema

##############################################################################
### Requisitos ###############################################################
##############################################################################

   * Smarty - http://smarty.php.net/
   * ADODB  - http://adodb.sf.net
   * MySQL  - http://www.mysql.org/


Smarty
--------------
Gerenciador de templates. Instalar seguindo a recomendação do próprio sistema.
Não há o que configurar. Baixar o pacote e explodir no subdiretório ext/.

Caso o servidor seja Debia, é suficiente instalar o pacote 'smarty'. O papers
encontrará ele no diretório /usr/share/php/smarty/libs.

ADODB
--------------

Biblioteca de acesso ao banco de dados. Não há o que configurar.
Baixar o pacote e explodir ele no subdiretório ext/, com o nome 'adodb'.

Caso o servidor seja Debian, é suficiente instalar o pacote 'smarty'. O papers
acha o Smarty no diretório /usr/share/adodb.


MySQL
--------------
Instalar seguindo a recomendação do próprio sistema.


##############################################################################
### Instalação ###############################################################
##############################################################################


Arquivos Gerados
----------------
rodar `make` na raiz dos fontes.


Criando o banco de dados
------------------------

As seguintes instruções são para a criação do banco de dados a partir da
linha de comando, e somente para o banco de dados MySQL. Se você utiliza
outr banco de dados, ou o acessa através de uma interface diferente
consulte a documentação do seu banco. Nos exemplos a seguir 'db_root' é um
usuário MySQL com privilégios GRANT e CREATE. Use o nome de usuário
apropriado para o seu sistema.

Primeiro você deve criar um novo banco de dados para a sua instalação do
papers (aqui, 'papers' é o nome do seu novo banco de dados):

  mysqladmin -u db_root -p create papers

O MySQL vai pedir a senha do usuário 'db_root' e então criará os
arquivos iniciais do banco de dados. A seguir você deve configurar as
permissões de acesso:

  mysql -u db_root -p

Novamente você será pergundado pela senha de 'db_root'. No linha de
comando do MySQL, entre com o seguinte comando:

  GRANT ALL PRIVILEGES ON papers.*
    TO nobody@localhost IDENTIFIED BY 'password';

onde

  'papers' é o nome do seu banco de dados
  'nobody@localhost' é o nome do usuário usado para acessar o banco
  'password' é a senha necessária para acessar o banco

Se tiver sucesso, o MySQL vai responder com:

  Query OK, 0 rows affected

Para ativar as novas permissoes você deve entrar com o comando:

  flush privileges;

e então saia da linha de comando do MySQL com '\q'.


Criando as tabelas no banco
---------------------------

Uma vez que você tenha o banco de dados, você deve carregar as tabelas
dentro dele.

Se você utiliza uma aplicação web para acessar o banco (tal como o
phpMyAdmin), você deve conseguir carregar as tabelas enviando o arquivo
database/database.mysql na seção apropriada da interface ou então
copiando-e-colando seu conteúdo como comandos SQL diretamente.

Da linha de comando (substituindo 'nobody' e 'papers' pelo nome de
usuário do MySQL e pelo nome do seu banco de dados), use:

  mysql -u nobody -p papers < database/database.mysql

Criando dados iniciais
----------------------

As seguintes tabelas não possuem interface para preenchimento, o que quer dizer que você tem que prenchê-las na mão:

   * macrotemas
   * keywords


Apontar o servidor web para a aplicação
---------------------------------------

Exemplo:

Instalar (ou criar um link para a instalação) em /usr/share/papers
fazer um link /var/www/papers -> /usr/share/papers

Ou:

  <VirtualHost *:80>
    ....
    ServerName papers.seu.dominio.dom
    DocumentRoot /usr/share/papers
    <Directory /usr/share/papers>
      Options +MultiViews
    </Directory>
    ....
  </VirtualHost>

(nota: Options +MultiViews é necessário para que se possa fazer referência aos
scripts PHP sem extensão, por exemplo, para que requisições a "script" sejam
processadas através do "script.php". Você vai notar que todo o sistema está
feito com referências aos scripts sem a extensão.)

Controle de acesso do /admin
----------------------------

Via apache, do jeito que você quiser. É bom que ao menos o /admin só seja
acessível por HTTPS.


Arquivo de configuração
-----------------------
Copie o arquivo conf/conf.php.dist para um dos seguintes diretórios:

  * ${PAPERSROOT}/conf
  * /etc/papers/

O nome do arquivo deve corresponder à URL por onde o papers está acessível para
aquele evento: o nome do arquivo de configuração é formado pelo hostname onde a
aplicação vai rodar + o caminho da aplicação. Exemplos:

Caminho da aplicação                   | Nome do arquivo de configuração
---------------------------------------+--------------------------------
http://www.blablabla.org/papers        | www.blablabla.org.papers.conf.php
http://blabla.org/~fulano/papers       | blablabla.org.fulano.papers.conf.php

A regra geral é: hostname (sem número de porta, se houver) + caminho até a raiz
da aplicação, trocando barras por pontos. Depois disso  qualquer coisa que não
seja [a-zA-Z0-9.] é removido. Qualquer dúvida, veja
admin/include/config.inc.php

O arquivo de configuração é procurado nos diretórios na ordem citada acima, e o
primeiro encontrado é utilizado.

Ajuste as entradas da configuração de acordo com as características do ambiente
de implantação bem como as características do evento em si. Essa configuração
inclui a configuração de acesso ao banco de dados _e_ a configuração do evento.
O arquivo de configuração

Conectando ao banco de dados
----------------------------

No arquivo 'config.inc.php' configure as variáveis da seção $papers[db]
com os dados do seu banco de dados. Seguindo nosso exemplo a
configuração ficaria assim:

  ....  
  // database configuration:
  $papers['db']['hostname']         = 'localhost';
  $papers['db']['database']         = 'papers';
  $papers['db']['username']         = 'nobody';
  $papers['db']['password']         = 'password';
  ....

